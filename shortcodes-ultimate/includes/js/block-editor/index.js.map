{"version":3,"sources":["includes/js/block-editor/node_modules/browser-pack/_prelude.js","includes/js/block-editor/includes/js/block-editor/src/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Fragment","wp","element","BlockControls","blockEditor","Button","components","registerPlugin","plugins","insertShortcodeHandler","dispatch","select","data","createBlock","blocks","selectedBlockId","getSelectedBlockClientId","selectedBlock","getBlock","blockType","getBlockType","name","attributes","content","window","SUG","App","insert","props","setAttributes","newAttrs","updateBlockAttributes","clientId","shortcodeBlock","text","insertionIndex","getBlockInsertionPoint","insertBlock","index","rootClientId","selectBlock","setTimeout","HeaderToolbarButton","React","createElement","icon","viewBox","xmlns","d","label","SUBlockEditorL10n","insertShortcode","onClick","className","render","editPost","PluginMoreMenuItem","SUBlockEditorSettings","showToolbarButton","domReady","addButtonToToolbar","buttonContainer","toolbar","document","querySelector","style","display","alignItems","marginLeft","appendChild","MutationObserver","observe","body","childList","subtree","showBlockControlsButton","hooks","addFilter","BlockEdit","supportedBlocks","indexOf","controls","title"],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const { Fragment } = wp.element\nconst { BlockControls } = wp.blockEditor\nconst { Button } = wp.components\nconst { registerPlugin } = wp.plugins\n\nconst withInsertShortcodeButton = BlockEdit => {\n  return props => {\n    if (SUBlockEditorSettings.supportedBlocks.indexOf(props.name) === -1) {\n      return <BlockEdit {...props} />\n    }\n\n    return (\n      <Fragment>\n        <BlockEdit {...props} />\n        <BlockControls\n          controls={[\n            {\n              icon: (\n                <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M10,3L3,3L3,21L10,21L10,17L7,17L7,7L10,7L10,3ZM14,3L21,3L21,21L14,21L14,17L17,17L17,7L14,7L14,3Z\" />\n                </svg>\n              ),\n              title: SUBlockEditorL10n.insertShortcode,\n              onClick: () => {\n                window.SUG.App.insert('block', { props: props })\n              }\n            }\n          ]}\n        />\n      </Fragment>\n    )\n  }\n}\n\n\nconst insertShortcodeHandler = () => {\n  const { dispatch, select } = wp.data\n  const { createBlock } = wp.blocks\n  const blockEditor = select('core/block-editor')\n  const selectedBlockId = blockEditor.getSelectedBlockClientId()\n  const selectedBlock = selectedBlockId ? blockEditor.getBlock(selectedBlockId) : null\n\n  if (selectedBlock) {\n    const blockType = wp.blocks.getBlockType(selectedBlock.name)\n\n    if (blockType && blockType.attributes && (blockType.attributes.content || selectedBlock.name === 'core/shortcode')) {\n      window.SUG.App.insert('block', { props: {\n        name: selectedBlock.name,\n        attributes: selectedBlock.attributes,\n        setAttributes: (newAttrs) => {\n          dispatch('core/block-editor').updateBlockAttributes(selectedBlock.clientId, newAttrs)\n        }\n      }})\n      return\n    }\n  }\n\n  const shortcodeBlock = createBlock('core/shortcode', { text: '' })\n  const insertionIndex = blockEditor.getBlockInsertionPoint()\n  dispatch('core/block-editor').insertBlock(shortcodeBlock, insertionIndex.index, insertionIndex.rootClientId)\n  dispatch('core/block-editor').selectBlock(shortcodeBlock.clientId)\n\n  setTimeout(() => {\n    window.SUG.App.insert('block', { props: {\n      name: 'core/shortcode',\n      attributes: { text: '' },\n      setAttributes: (newAttrs) => {\n        dispatch('core/block-editor').updateBlockAttributes(shortcodeBlock.clientId, newAttrs)\n      }\n    }})\n  }, 100)\n}\n\nconst HeaderToolbarButton = () => {\n  return (\n    <Button\n      icon={\n        <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M10,3L3,3L3,21L10,21L10,17L7,17L7,7L10,7L10,3ZM14,3L21,3L21,21L14,21L14,17L17,17L17,7L14,7L14,3Z\" />\n        </svg>\n      }\n      label={SUBlockEditorL10n.insertShortcode}\n      onClick={insertShortcodeHandler}\n      className=\"su-insert-shortcode-button\"\n    />\n  )\n}\n\nconst ShortcodeUltimateToolbar = () => {\n  return (\n    <wp.editPost.PluginMoreMenuItem\n      icon={\n        <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M10,3L3,3L3,21L10,21L10,17L7,17L7,7L10,7L10,3ZM14,3L21,3L21,21L14,21L14,17L17,17L17,7L14,7L14,3Z\" />\n        </svg>\n      }\n      onClick={insertShortcodeHandler}\n    >\n      {SUBlockEditorL10n.insertShortcode}\n    </wp.editPost.PluginMoreMenuItem>\n  )\n}\n\nregisterPlugin('shortcodes-ultimate-toolbar', {\n  render: ShortcodeUltimateToolbar\n})\n\nif (SUBlockEditorSettings.showToolbarButton === 'on') {\n  wp.domReady(() => {\n    const toolbarSelector = '.edit-post-header-toolbar, .editor-header__toolbar'\n\n    const addButtonToToolbar = () => {\n      const toolbar = document.querySelector(toolbarSelector)\n\n      if (toolbar && !document.querySelector('.su-insert-shortcode-button')) {\n        const buttonContainer = document.createElement('div')\n        buttonContainer.style.display = 'inline-flex'\n        buttonContainer.style.alignItems = 'center'\n        buttonContainer.style.marginLeft = '8px'\n\n        toolbar.appendChild(buttonContainer)\n\n        wp.element.render(\n          wp.element.createElement(HeaderToolbarButton),\n          buttonContainer\n        )\n      }\n    }\n\n    addButtonToToolbar()\n\n    const observer = new MutationObserver(() => {\n      addButtonToToolbar()\n    })\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    })\n  })\n}\n\nif (SUBlockEditorSettings.showBlockControlsButton === 'on') {\n  wp.hooks.addFilter(\n    'editor.BlockEdit',\n    'shortcodes-ultimate/with-insert-shortcode-button',\n    withInsertShortcodeButton\n  )\n}\n"]}